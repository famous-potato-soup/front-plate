(window["webpackJsonpfront-plate"]=window["webpackJsonpfront-plate"]||[]).push([[0],{1522:function(e,t,a){},1524:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),i=a(175),r=a.n(i),s=(a(593),a(83)),c=(a(594),a(63)),l=a(129),u=a(573),m=a.n(u),d=a(130),h=(a(596),a(574)),p=a.n(h),g=a(575),f=a.n(g);function y(){var e=Object(l.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 100%;\n  height: 100%;\n"]);return y=function(){return e},e}var v=d.a.div(y()),w=function(){var e=Object(c.b)(["user"]),t=Object(s.a)(e,2),a=(t[0],t[1]);return o.a.createElement(v,{className:"LoginComponent"},o.a.createElement("div",{className:"logoImg_wrap zOpt"},o.a.createElement("img",{src:p.a,alt:"logo",className:"logoImg"})),o.a.createElement("div",{className:"Facebook_wrap zOpt"},o.a.createElement(m.a,{appId:"708043523042716",autoLoad:!1,fields:"name,email,picture",callback:function(e){var t={method:"POST",body:new Blob([JSON.stringify({access_token:e.accessToken},null,2)],{type:"application/json"}),mode:"cors",cache:"default"};fetch("".concat("http://backend.io:4000"),t).then((function(e){var t=e.headers.get("x-auth-token");e.json().then((function(e){t&&console.log(e,t)}))})),a("user",e)},render:function(e){return o.a.createElement("button",{className:"my-facebook-button-class",onClick:e.onClick})}})),o.a.createElement("div",{className:"logoImg_wrap bottom"},o.a.createElement("img",{src:f.a,alt:"stone",className:"stone"})))},b=a(578),E=a.n(b).a.connect("".concat("http://backend.io:3000/")),k=function(e){E.on("gameStart",(function(e){return console.log(e)})),E.on("shoot",(function(e){return console.log(e)})),E.on("moveEnd",(function(e){return console.log(e)})),E.on("canShoot",(function(e){return console.log}));var t={name:e.user.name,email:e.user.email,userID:e.user.id,picture:e.user.picture.data.url};E.emit("userLogin",t);E.on("gameRoomState",(function(e){console.log(e)})),E.on("gameRoomInfo",(function(e){console.log(e)}));E.on("finishGame",(function(e){console.log(e)}))},O=a(579),B=a.n(O),N=a(580),S=a.n(N);function j(){var e=Object(l.a)(["\n  position: relative;\n  z-index: 3;\n"]);return j=function(){return e},e}function D(){var e=Object(l.a)(["\n  position: fixed;\n  z-index: 2;\n  bottom: 0;\n  left: 30%;\n"]);return D=function(){return e},e}var _=d.a.div(D()),P=d.a.div(j()),x=function(e){var t=e.onGameStart,a=Object(c.b)(["user"]),n=Object(s.a)(a,2),i=n[0],r=n[1];i.user&&k(i);return o.a.createElement("div",{className:"Info_wrap"},o.a.createElement(P,null,o.a.createElement("div",{className:"infoContent firstInfo"},o.a.createElement("div",{className:"stoneInfo info"},o.a.createElement("img",{src:B.a,alt:"stone"})),o.a.createElement("div",{className:"myInfo info"},o.a.createElement("div",{className:"user-img"},o.a.createElement("img",{src:i.user.picture.data.url})),o.a.createElement("p",{className:"user_name"}," ",i.user.name),o.a.createElement("p",null,i.user.email))),o.a.createElement("div",{className:"infoContent secondInfo"},o.a.createElement("div",{className:"rank info"},o.a.createElement("h2",null,"rank")),o.a.createElement("div",{className:"start_wrap info"},o.a.createElement("button",{className:"GameStart-btn",onClick:function(){t()}},o.a.createElement("p",null,"Game Start")))),o.a.createElement("div",{className:"logout-btn_wrap"},o.a.createElement("button",{className:"logout-btn",onClick:function(){r("user","")}},"\ub85c\uadf8\uc544\uc6c3"))),o.a.createElement(_,null,o.a.createElement("img",{src:S.a,alt:"thumb_img"})))},C=a(177),T=a(178),G=a(584),I=a(581),A=a(587),L=a(109),W=a.n(L),z=function(){function e(t){Object(C.a)(this,e),this.options=void 0,this.game=void 0,this.graphics=void 0,this.player=void 0,this.minimap=void 0,this.isDragging=!1,this.options=t,this.setPhaserObjects()}return Object(T.a)(e,[{key:"setPhaserObjects",value:function(){var e=this.options,t=e.autoFocus,a=e.width,n=e.height,o=e.parent,i=e.onDestroy;this.game=new W.a.Game({autoFocus:t,type:W.a.AUTO,parent:o,scale:{width:a,height:n,mode:W.a.Scale.ENVELOP,autoCenter:W.a.Scale.CENTER_BOTH,expandParent:!0},physics:{default:"matter"},scene:{create:this.createGame,update:this.updateGame,preload:this.preloadGameAssets,extend:{setWorldBoundsAndCamera:this.setWorldBoundsAndCamera,setBackgrounds:this.setBackgrounds,drawBackgroundBorder:this.drawBackgroundBorder,setPlayer:this.setPlayer,addDragEventListener:this.addDragEventListener,createPlayer:this.createPlayer,calculateWindowSize:this.calculateWindowSize,game:this.game,onDestroy:i}}})}},{key:"preloadGameAssets",value:function(){this.load.image("background-tile","/static/in-game/background.png"),this.load.image("player-black","/static/in-game/player.png")}},{key:"createGame",value:function(){var e=this;this.setWorldBoundsAndCamera(this),this.setBackgrounds(this),this.drawBackgroundBorder(this),this.setPlayer(this),this.addDragEventListener(this),this.matter.world.on("collisionstart",(function(t){var a=t.pairs[0];!a.bodyA.isStatic&&!a.bodyB.isStatic||"My Player"!=a.bodyA.label&&"My Player"!=a.bodyB.label||(console.log("Game Over"),e.onDestroy())}))}},{key:"setWorldBoundsAndCamera",value:function(e){e.matter.world.setBounds(),e.cameras.main.setZoom(1.85),this.minimap=e.cameras.add(0,0,300,300),this.minimap.setZoom(.2).setName("mini"),this.minimap.setBounds(0,0,1e3,1e3),this.minimap.setBackgroundColor(16777215),this.calculateWindowSize(e)}},{key:"calculateWindowSize",value:function(e){var t=window.innerWidth,a=window.innerHeight,n=e.scale.canvas.width,o=e.scale.canvas.height,i=n/o,r=t/a;if(this.minimap)if(r>i){var s=n/r;this.minimap.setPosition(n-300-50,o-300-50-(o-s)/2)}else if(r<i){var c=o*r;this.minimap.setPosition(n-300-50-(n-c)/2,o-300-50)}else this.minimap.setPosition(n-300-50,o-300-50)}},{key:"setBackgrounds",value:function(e){e.add.tileSprite(-0,-0,e.scale.width+0,e.scale.height+0,"background-tile").setOrigin(0),e.cameras.main.setBackgroundColor(16777215)}},{key:"drawBackgroundBorder",value:function(e){var t=e.add.graphics();t.lineStyle(10,0,1),t.moveTo(0,0),t.lineTo(e.scale.width-0,0),t.lineTo(e.scale.width-0,e.scale.height-0),t.lineTo(0,e.scale.height-0),t.lineTo(0,0),t.stroke()}},{key:"setPlayer",value:function(e){return this.player=this.createPlayer(e,100,100),this.player.body.label="My Player",e.cameras.main.startFollow(this.player,!0),this.createPlayer(e,300,300),this.player}},{key:"createPlayer",value:function(e,t,a){var n=e.matter.add.image(t,a,"player-black");return n.setCircle(n.width/2,{}),n.setBounce(2),n.setFrictionAir(.08),n.setIgnoreGravity(!0),n}},{key:"addDragEventListener",value:function(e){var t=this,a=new W.a.Geom.Line,n=e.add.graphics();this.isDragging=!1,e.input.on("pointerdown",(function(e){t.player&&e.worldX>t.player.x-25&&e.worldX<t.player.x+25&&e.worldY>t.player.y-25&&e.worldY<t.player.y+25&&(t.isDragging=!0,n.clear(),n.lineStyle(1,0,1),a.setTo(t.player.x,t.player.y,e.worldX,e.worldY),n.strokeLineShape(a))})),e.input.on("pointermove",(function(e){e.isDown&&t.isDragging&&t.player&&(a.setTo(t.player.x,t.player.y,e.worldX,e.worldY),n.clear(),n.lineStyle(1,0,1),n.strokeLineShape(a))})),e.input.on("pointerup",(function(e,o){if(t.player&&t.isDragging){t.isDragging=!1,n.clear();var i=a.x1-a.x2,r=a.y1-a.y2;t.player.setVelocity(.15*i,.15*r)}}))}},{key:"updateGame",value:function(e){this.graphics}}]),e}(),X=(a(1522),function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(G.a)(this,(e=Object(I.a)(t)).call.apply(e,[this].concat(o)))).gameBoard=void 0,a.onDestroy=function(){a.props.onDestroy()},a}return Object(A.a)(t,e),Object(T.a)(t,[{key:"componentDidMount",value:function(){this.gameBoard=new z({autoFocus:!0,width:1500,height:1500,parent:"phaser-parent",onDestroy:this.onDestroy})}},{key:"render",value:function(){return o.a.createElement("div",{id:"phaser-parent"})}}]),t}(o.a.PureComponent)),F=Object(c.c)((function(){var e=Object(n.useState)(!0),t=Object(s.a)(e,2),a=t[0],i=t[1],r=Object(c.b)(["user"]),l=Object(s.a)(r,1)[0];return o.a.createElement("div",{className:"App"},o.a.createElement("div",{className:"content"},l.user?a?o.a.createElement(X,{onDestroy:function(){i(!1)}}):o.a.createElement(x,{onGameStart:function(){i(!0)}}):o.a.createElement(w,null)))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var R=a(583),M=a(107),U=Object(M.b)({});var V=a(285);V.a.initialize("UA-147950989-1"),V.a.pageview(window.location.pathname+window.location.search);var Y=Object(M.c)(U,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());r.a.render(o.a.createElement(R.a,{store:Y},o.a.createElement(c.a,null,o.a.createElement(F,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},574:function(e,t,a){e.exports=a.p+"static/media/img-logo.2809a28a.png"},575:function(e,t,a){e.exports=a.p+"static/media/loginOval.5d48089f.png"},579:function(e,t,a){e.exports=a.p+"static/media/oval.99a2a003.png"},580:function(e,t,a){e.exports=a.p+"static/media/img-win.2f43965a.png"},588:function(e,t,a){e.exports=a(1524)},593:function(e,t,a){},594:function(e,t,a){},596:function(e,t,a){},621:function(e,t){}},[[588,1,2]]]);
//# sourceMappingURL=main.c36c4060.chunk.js.map